# =============================================================================
# AI 总结服务配置文件
# =============================================================================
# 复制此文件为 config.yaml 并根据需要修改

# -----------------------------------------------------------------------------
# Gemini API 设置
# -----------------------------------------------------------------------------
gemini:
  # Google API Key（必填）
  api_key: ""

  # 模型名称
  # 默认: "gemini-3-flash-preview"
  model: "gemini-3-flash-preview"

  # API 调用失败重试次数
  # 默认: 3
  max_retries: 3

  # 重试间隔（秒）
  # 默认: 2
  retry_delay: 2

# -----------------------------------------------------------------------------
# 截图数据源设置
# -----------------------------------------------------------------------------
screenshot:
  # 截图目录（相对或绝对路径）
  # 指向 auto_screenshot 的输出目录
  # 默认: "../auto_screenshot/screenshots"
  directory: "../auto_screenshot/screenshots"

  # 截图格式
  # 默认: "jpeg"
  format: "jpeg"

  # 截图间隔（秒），用于计算每分钟截图数量
  # 默认: 10（对应每分钟6张）
  interval: 10

# -----------------------------------------------------------------------------
# 总结设置
# -----------------------------------------------------------------------------
summary:
  # 总结输出目录
  # 默认: "./summaries"
  directory: "./summaries"

  # 各粒度配置
  granularity:
    2min:
      # 是否启用2分钟级别总结
      enabled: true
      # 每分钟截图数量（60 / screenshot.interval）
      # 2分钟总结会读取 2 * screenshots_per_minute 张截图
      screenshots_per_minute: 6
      # 需要读取过去多少分钟的2min总结作为上下文（会按2分钟粒度折算条数）
      history_minutes: 9

    10min:
      # 是否启用10分钟级别总结
      enabled: true
      # 需要读取过去多少个10min总结作为上下文
      history_count: 5

    1h:
      # 是否启用1小时级别总结
      enabled: true
      # 最近的10min总结数量
      recent_10min_count: 6
      # 更早的10min总结数量
      earlier_10min_count: 6

# -----------------------------------------------------------------------------
# 时间调度设置
# -----------------------------------------------------------------------------
schedule:
  # 是否启用时间限制
  # 默认: false
  enabled: false

  # 开始时间 (HH:MM 格式)
  start_time: "08:00"

  # 结束时间 (HH:MM 格式)
  end_time: "22:00"

  # 允许的工作日
  days:
    - Mon
    - Tue
    - Wed
    - Thu
    - Fri

  # 停止时间点（可选）
  # 配置后服务会在到达最近的停止时间时自动退出
  # 例: ["12:00", "19:00"]
  stop_times:
    - "12:00"
    - "19:00"

# -----------------------------------------------------------------------------
# 日志设置
# -----------------------------------------------------------------------------
logging:
  # 日志级别: debug | info | warn | error
  level: "info"

  # 日志文件路径
  file: "./logs/ai-summary.log"

  # 是否输出到控制台
  console: true
